{"version":3,"file":"LoginForm-B1tZwOQp.js","sources":["../../../../components/LoginForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen flex items-center justify-center bg-game-dark\">\r\n    <div class=\"game-card max-w-md w-full mx-4 p-8 rounded-lg\">\r\n      <h2 class=\"text-2xl font-bold text-center mb-6 text-white\">\r\n        {{ isLogin ? 'Đăng Nhập' : 'Đăng Ký' }}\r\n      </h2>\r\n\r\n      <form @submit.prevent=\"handleSubmit\" class=\"space-y-4\">\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-game-text-secondary mb-2\">\r\n            Tên đăng nhập\r\n          </label>\r\n          <input\r\n            v-model=\"form.username\"\r\n            type=\"text\"\r\n            required\r\n            class=\"w-full px-3 py-2 bg-game-light border border-white/20 rounded-lg text-white focus:outline-none focus:border-game-accent\"\r\n            placeholder=\"Nhập tên đăng nhập\"\r\n          />\r\n        </div>\r\n\r\n        <div v-if=\"!isLogin\">\r\n          <label class=\"block text-sm font-medium text-game-text-secondary mb-2\">\r\n            Email\r\n          </label>\r\n          <input\r\n            v-model=\"form.email\"\r\n            type=\"email\"\r\n            required\r\n            class=\"w-full px-3 py-2 bg-game-light border border-white/20 rounded-lg text-white focus:outline-none focus:border-game-accent\"\r\n            placeholder=\"Nhập email\"\r\n          />\r\n        </div>\r\n\r\n        <div v-if=\"!isLogin\">\r\n          <label class=\"block text-sm font-medium text-game-text-secondary mb-2\">\r\n            Tên nhân vật\r\n          </label>\r\n          <input\r\n            v-model=\"form.playerName\"\r\n            type=\"text\"\r\n            required\r\n            class=\"w-full px-3 py-2 bg-game-light border border-white/20 rounded-lg text-white focus:outline-none focus:border-game-accent\"\r\n            placeholder=\"Nhập tên nhân vật\"\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-game-text-secondary mb-2\">\r\n            Mật khẩu\r\n          </label>\r\n          <input\r\n            v-model=\"form.password\"\r\n            type=\"password\"\r\n            required\r\n            class=\"w-full px-3 py-2 bg-game-light border border-white/20 rounded-lg text-white focus:outline-none focus:border-game-accent\"\r\n            placeholder=\"Nhập mật khẩu\"\r\n          />\r\n        </div>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          :disabled=\"loading\"\r\n          class=\"w-full game-button py-2 rounded-lg text-white font-semibold disabled:opacity-50\"\r\n        >\r\n          {{ loading ? 'Đang xử lý...' : (isLogin ? 'Đăng Nhập' : 'Đăng Ký') }}\r\n        </button>\r\n      </form>\r\n\r\n      <div class=\"text-center mt-4\">\r\n        <button\r\n          @click=\"toggleMode\"\r\n          class=\"text-game-accent hover:text-green-300 transition-colors\"\r\n        >\r\n          {{ isLogin ? 'Chưa có tài khoản? Đăng ký' : 'Đã có tài khoản? Đăng nhập' }}\r\n        </button>\r\n      </div>\r\n\r\n      <div v-if=\"error\" class=\"mt-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg\">\r\n        <p class=\"text-red-400 text-sm\">{{ error }}</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nconst authStore = useAuthStore()\r\nconst playerStore = usePlayerStore()\r\nconst router = useRouter()\r\n\r\n// Form state\r\nconst isLogin = ref(true)\r\nconst form = ref({\r\n  username: '',\r\n  email: '',\r\n  password: '',\r\n  playerName: ''\r\n})\r\n\r\n// Computed\r\nconst loading = computed(() => authStore.loading)\r\nconst error = computed(() => authStore.error)\r\n\r\n// Methods\r\nconst toggleMode = () => {\r\n  isLogin.value = !isLogin.value\r\n  form.value = {\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n    playerName: ''\r\n  }\r\n  authStore.reset()\r\n}\r\n\r\nconst handleSubmit = async () => {\r\n  try {\r\n    if (isLogin.value) {\r\n      await authStore.login(form.value.username, form.value.password)\r\n    } else {\r\n      await authStore.register(\r\n        form.value.username,\r\n        form.value.email,\r\n        form.value.password,\r\n        form.value.playerName\r\n      )\r\n    }\r\n\r\n    // Initialize player data after successful auth\r\n    if (authStore.user?.player) {\r\n      await playerStore.initializePlayer(authStore.user.player.id)\r\n    }\r\n\r\n    // Redirect to game\r\n    await router.push('/')\r\n  } catch (err) {\r\n    console.error('Auth error:', err)\r\n  }\r\n}\r\n\r\n// Initialize auth on mount\r\nonMounted(() => {\r\n  authStore.initializeAuth()\r\n  if (authStore.isLoggedIn) {\r\n    router.push('/')\r\n  }\r\n})\r\n</script>\r\n"],"names":["_ssrRenderAttrs","_mergeProps","_unref","_ssrRenderAttr","_ssrInterpolate"],"mappings":";;;;;;;;;AAsFA,UAAM,YAAY,aAAY;AACV,mBAAc;AACnB,cAAS;AAGxB,UAAM,UAAU,IAAI,IAAI;AACxB,UAAM,OAAO,IAAI;AAAA,MACf,UAAU;AAAA,MACV,OAAO;AAAA,MACP,UAAU;AAAA,MACV,YAAY;AAAA,IACd,CAAC;AAGD,UAAM,UAAU,SAAS,MAAM,UAAU,OAAO;AAChD,UAAM,QAAQ,SAAS,MAAM,UAAU,KAAK;;mBApGrCA,eAAAC,WAAA,EAAA,OAAM,6DAA4D,GAAA,MAAA,CAAA,0IAG9DC,MAAA,OAAA,IAAO,cAAA,SAAA,0IASGC,cAAA,SAAAD,MAAA,IAAA,EAAK,QAAQ;WAQdA,MAAA,OAAA,GAAO;AAKN,cAAA,oGAAAC,cAAA,SAAAD,MAAA,IAAA,EAAK,KAAK,CAAA,wLAAA;AAAA;;;WAQXA,MAAA,OAAA,GAAO;AAKN,cAAA,2GAAAC,cAAA,SAAAD,MAAA,IAAA,EAAK,UAAU,CAAA,8LAAA;AAAA;;;mHAafC,cAAA,SAAAD,MAAA,IAAA,EAAK,QAAQ,2OAUbA,MAAA,OAAA,CAAO,IAAA,cAAA,8FAGfE,eAAAF,MAAA,OAAA,sBAA6BA,MAAA,OAAA,IAAO,cAAA,SAAA,yIASpCA,MAAA,OAAA,IAAO,+BAAA,4BAAA;UAIHA,MAAA,KAAA,GAAK;wIACqBA,MAAA,KAAA,CAAK,CAAA,YAAA;AAAA;;;;;;;;;;;;;"}