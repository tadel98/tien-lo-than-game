{"file":"quest-kCXcHEBo.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrInterpolate","_ssrIncludeBooleanAttr"],"sources":["../../../../stores/quest.ts","../../../../pages/quest.vue"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport { ref, computed } from 'vue'\r\n\r\nexport const useQuestStore = defineStore('quest', () => {\r\n  // State\r\n  const quests = ref<any[]>([])\r\n  const loading = ref(false)\r\n  const error = ref(null)\r\n\r\n  // Getters\r\n  const availableQuests = computed(() => {\r\n    return quests.value.filter(quest => quest.playerStatus.status === 'available')\r\n  })\r\n\r\n  const inProgressQuests = computed(() => {\r\n    return quests.value.filter(quest => quest.playerStatus.status === 'in_progress')\r\n  })\r\n\r\n  const completedQuests = computed(() => {\r\n    return quests.value.filter(quest => quest.playerStatus.status === 'completed')\r\n  })\r\n\r\n  const questsByLevel = computed(() => {\r\n    const grouped: { [key: number]: any[] } = {}\r\n    quests.value.forEach(quest => {\r\n      if (!grouped[quest.level]) {\r\n        grouped[quest.level] = []\r\n      }\r\n      grouped[quest.level].push(quest)\r\n    })\r\n    return grouped\r\n  })\r\n\r\n  // Actions\r\n  const fetchQuests = async (playerId: string) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n\r\n      const response: any = await $fetch(`/api/quest/list?playerId=${playerId}`)\r\n      quests.value = response.data.quests\r\n    } catch (err: any) {\r\n      error.value = err.message\r\n      console.error('Error fetching quests:', err)\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  const startQuest = async (playerId: string, questId: string) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n\r\n      const response: any = await $fetch('/api/quest/start', {\r\n        method: 'POST',\r\n        body: {\r\n          playerId,\r\n          questId\r\n        }\r\n      })\r\n\r\n      // Cập nhật quest trong danh sách\r\n      const questIndex = quests.value.findIndex(q => q.id === questId)\r\n      if (questIndex !== -1) {\r\n        quests.value[questIndex] = response.data.quest\r\n      }\r\n\r\n      return response.data\r\n    } catch (err: any) {\r\n      error.value = err.message\r\n      console.error('Error starting quest:', err)\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  const completeQuest = async (playerId: string, questId: string) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n\r\n      const response: any = await $fetch('/api/quest/complete', {\r\n        method: 'POST',\r\n        body: {\r\n          playerId,\r\n          questId\r\n        }\r\n      })\r\n\r\n      // Cập nhật quest trong danh sách\r\n      const questIndex = quests.value.findIndex(q => q.id === questId)\r\n      if (questIndex !== -1) {\r\n        quests.value[questIndex] = response.data.quest\r\n      }\r\n\r\n      return response.data\r\n    } catch (err: any) {\r\n      error.value = err.message\r\n      console.error('Error completing quest:', err)\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  const getQuestById = (questId: string) => {\r\n    return quests.value.find(quest => quest.id === questId)\r\n  }\r\n\r\n  const getQuestsByLevel = (level: number) => {\r\n    return quests.value.filter(quest => quest.level === level)\r\n  }\r\n\r\n  const reset = () => {\r\n    quests.value = []\r\n    loading.value = false\r\n    error.value = null\r\n  }\r\n\r\n  return {\r\n    // State\r\n    quests,\r\n    loading,\r\n    error,\r\n    \r\n    // Getters\r\n    availableQuests,\r\n    inProgressQuests,\r\n    completedQuests,\r\n    questsByLevel,\r\n    \r\n    // Actions\r\n    fetchQuests,\r\n    startQuest,\r\n    completeQuest,\r\n    getQuestById,\r\n    getQuestsByLevel,\r\n    reset\r\n  }\r\n})\r\n","<template>\r\n  <div v-if=\"!isAuthenticated\" class=\"min-h-screen\">\r\n    <LoginForm />\r\n  </div>\r\n  \r\n  <div v-else class=\"min-h-screen text-white\">\r\n    <!-- Header -->\r\n    <div class=\"bg-black/20 backdrop-blur-sm border-b border-purple-500/30\">\r\n      <div class=\"container mx-auto px-4 py-6\">\r\n        <div class=\"flex items-center justify-between\">\r\n          <div class=\"flex items-center space-x-4\">\r\n            <h1 class=\"text-3xl font-bold bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent\">\r\n              📋 Nhiệm Vụ\r\n            </h1>\r\n            <div class=\"text-sm text-gray-400\">\r\n              Hoàn thành nhiệm vụ để nhận EXP và tài nguyên\r\n            </div>\r\n          </div>\r\n          <button \r\n            @click=\"refreshQuests\"\r\n            :disabled=\"loading\"\r\n            class=\"px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 rounded-lg transition-colors\"\r\n          >\r\n            {{ loading ? 'Đang tải...' : '🔄 Làm mới' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Quest Tabs -->\r\n    <div class=\"container mx-auto px-4 py-6\">\r\n      <div class=\"flex space-x-2 mb-8\">\r\n        <button\r\n          v-for=\"tab in questTabs\"\r\n          :key=\"tab.value\"\r\n          @click=\"activeTab = tab.value\"\r\n          :class=\"[\r\n            'px-6 py-3 rounded-lg font-medium transition-all duration-300',\r\n            activeTab === tab.value\r\n              ? 'bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg'\r\n              : 'bg-gray-800/50 text-gray-300 hover:bg-gray-700/50'\r\n          ]\"\r\n        >\r\n          {{ tab.icon }} {{ tab.label }}\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Quest List -->\r\n      <div class=\"grid gap-6\">\r\n        <!-- Available Quests -->\r\n        <div v-if=\"activeTab === 'available' && availableQuests.length > 0\" class=\"space-y-4\">\r\n          <h2 class=\"text-xl font-bold text-white mb-4\">Nhiệm Vụ Có Thể Nhận</h2>\r\n          <div \r\n            v-for=\"quest in availableQuests\" \r\n            :key=\"quest.id\"\r\n            class=\"bg-gray-900/50 backdrop-blur-sm rounded-xl border border-purple-500/20 p-6 hover:border-purple-500/40 transition-all duration-300\"\r\n          >\r\n            <div class=\"flex items-start justify-between\">\r\n              <div class=\"flex-1\">\r\n                <div class=\"flex items-center space-x-3 mb-3\">\r\n                  <h3 class=\"text-lg font-bold text-white\">{{ quest.displayName }}</h3>\r\n                  <span class=\"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full\">\r\n                    {{ getDifficultyText(quest.difficulty) }}\r\n                  </span>\r\n                  <span v-if=\"quest.isRepeatable\" class=\"px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded-full\">\r\n                    🔄 {{ quest.repeatInterval }}p\r\n                  </span>\r\n                </div>\r\n                <p class=\"text-gray-300 mb-4\">{{ quest.description }}</p>\r\n                \r\n                <!-- Rewards -->\r\n                <div class=\"mb-4\">\r\n                  <h4 class=\"text-sm font-semibold text-yellow-400 mb-2\">Phần Thưởng:</h4>\r\n                  <div class=\"flex flex-wrap gap-2\">\r\n                    <span v-if=\"quest.rewards\" class=\"px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm\">\r\n                      +{{ JSON.parse(quest.rewards).experience || 0 }} EXP\r\n                    </span>\r\n                    <span \r\n                      v-for=\"(amount, resource) in JSON.parse(quest.rewards || '{}').resources || {}\" \r\n                      :key=\"resource\"\r\n                      class=\"px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-sm\"\r\n                    >\r\n                      +{{ amount }} {{ resource }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <button\r\n                @click=\"startQuest(quest.id)\"\r\n                :disabled=\"loading || player?.level < quest.level\"\r\n                class=\"ml-4 px-6 py-2 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-white font-semibold transition-all duration-300\"\r\n              >\r\n                Nhận Nhiệm Vụ\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- In Progress Quests -->\r\n        <div v-if=\"activeTab === 'in_progress' && inProgressQuests.length > 0\" class=\"space-y-4\">\r\n          <h2 class=\"text-xl font-bold text-white mb-4\">Nhiệm Vụ Đang Thực Hiện</h2>\r\n          <div \r\n            v-for=\"quest in inProgressQuests\" \r\n            :key=\"quest.id\"\r\n            class=\"bg-gray-900/50 backdrop-blur-sm rounded-xl border border-orange-500/20 p-6 hover:border-orange-500/40 transition-all duration-300\"\r\n          >\r\n            <div class=\"flex items-start justify-between\">\r\n              <div class=\"flex-1\">\r\n                <div class=\"flex items-center space-x-3 mb-3\">\r\n                  <h3 class=\"text-lg font-bold text-white\">{{ quest.displayName }}</h3>\r\n                  <span class=\"px-2 py-1 bg-orange-500/20 text-orange-400 text-xs rounded-full\">\r\n                    Đang thực hiện\r\n                  </span>\r\n                </div>\r\n                <p class=\"text-gray-300 mb-4\">{{ quest.description }}</p>\r\n                \r\n                <!-- Progress -->\r\n                <div class=\"mb-4\">\r\n                  <div class=\"flex items-center justify-between text-sm text-gray-400 mb-2\">\r\n                    <span>Tiến độ</span>\r\n                    <span>100%</span>\r\n                  </div>\r\n                  <div class=\"w-full bg-gray-700 rounded-full h-2\">\r\n                    <div class=\"bg-gradient-to-r from-orange-500 to-yellow-500 h-2 rounded-full\" style=\"width: 100%\"></div>\r\n                  </div>\r\n                </div>\r\n\r\n                <!-- Rewards -->\r\n                <div class=\"mb-4\">\r\n                  <h4 class=\"text-sm font-semibold text-yellow-400 mb-2\">Phần Thưởng:</h4>\r\n                  <div class=\"flex flex-wrap gap-2\">\r\n                    <span v-if=\"quest.rewards\" class=\"px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm\">\r\n                      +{{ JSON.parse(quest.rewards).experience || 0 }} EXP\r\n                    </span>\r\n                    <span \r\n                      v-for=\"(amount, resource) in JSON.parse(quest.rewards || '{}').resources || {}\" \r\n                      :key=\"resource\"\r\n                      class=\"px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-sm\"\r\n                    >\r\n                      +{{ amount }} {{ resource }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <button\r\n                @click=\"completeQuest(quest.id)\"\r\n                :disabled=\"loading\"\r\n                class=\"ml-4 px-6 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-white font-semibold transition-all duration-300\"\r\n              >\r\n                Hoàn Thành\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Repeatable Quests -->\r\n        <div v-if=\"activeTab === 'repeatable' && repeatableQuests.length > 0\" class=\"space-y-4\">\r\n          <h2 class=\"text-xl font-bold text-white mb-4\">Nhiệm Vụ Lặp Lại</h2>\r\n          <div \r\n            v-for=\"quest in repeatableQuests\" \r\n            :key=\"quest.id\"\r\n            class=\"bg-gray-900/50 backdrop-blur-sm rounded-xl border border-green-500/20 p-6 hover:border-green-500/40 transition-all duration-300\"\r\n          >\r\n            <div class=\"flex items-start justify-between\">\r\n              <div class=\"flex-1\">\r\n                <div class=\"flex items-center space-x-3 mb-3\">\r\n                  <h3 class=\"text-lg font-bold text-white\">{{ quest.displayName }}</h3>\r\n                  <span class=\"px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded-full\">\r\n                    🔄 {{ quest.repeatInterval }}p\r\n                  </span>\r\n                </div>\r\n                <p class=\"text-gray-300 mb-4\">{{ quest.description }}</p>\r\n                \r\n                <!-- Rewards -->\r\n                <div class=\"mb-4\">\r\n                  <h4 class=\"text-sm font-semibold text-yellow-400 mb-2\">Phần Thưởng:</h4>\r\n                  <div class=\"flex flex-wrap gap-2\">\r\n                    <span v-if=\"quest.rewards\" class=\"px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm\">\r\n                      +{{ JSON.parse(quest.rewards).experience || 0 }} EXP\r\n                    </span>\r\n                    <span \r\n                      v-for=\"(amount, resource) in JSON.parse(quest.rewards || '{}').resources || {}\" \r\n                      :key=\"resource\"\r\n                      class=\"px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-sm\"\r\n                    >\r\n                      +{{ amount }} {{ resource }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <button\r\n                @click=\"startQuest(quest.id)\"\r\n                :disabled=\"loading\"\r\n                class=\"ml-4 px-6 py-2 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-white font-semibold transition-all duration-300\"\r\n              >\r\n                Nhận Nhiệm Vụ\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Cooldown Quests -->\r\n        <div v-if=\"activeTab === 'cooldown' && cooldownQuests.length > 0\" class=\"space-y-4\">\r\n          <h2 class=\"text-xl font-bold text-white mb-4\">Nhiệm Vụ Đang Chờ Làm Mới</h2>\r\n          <div \r\n            v-for=\"quest in cooldownQuests\" \r\n            :key=\"quest.id\"\r\n            class=\"bg-gray-900/50 backdrop-blur-sm rounded-xl border border-orange-500/20 p-6 hover:border-orange-500/40 transition-all duration-300\"\r\n          >\r\n            <div class=\"flex items-start justify-between\">\r\n              <div class=\"flex-1\">\r\n                <div class=\"flex items-center space-x-3 mb-3\">\r\n                  <h3 class=\"text-lg font-bold text-white\">{{ quest.displayName }}</h3>\r\n                  <span class=\"px-2 py-1 bg-orange-500/20 text-orange-400 text-xs rounded-full\">\r\n                    ⏰ {{ quest.playerStatus.cooldownRemaining }}s\r\n                  </span>\r\n                </div>\r\n                <p class=\"text-gray-300 mb-4\">{{ quest.description }}</p>\r\n                \r\n                <!-- Cooldown Info -->\r\n                <div class=\"mb-4\">\r\n                  <div class=\"text-sm text-gray-400\">\r\n                    Hoàn thành lần cuối: {{ formatDate(quest.playerStatus.lastCompletedAt) }}\r\n                  </div>\r\n                  <div class=\"text-sm text-orange-400\">\r\n                    Có thể nhận lại sau: {{ formatTime(quest.playerStatus.cooldownRemaining) }}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Completed Quests -->\r\n        <div v-if=\"activeTab === 'completed' && completedQuests.length > 0\" class=\"space-y-4\">\r\n          <h2 class=\"text-xl font-bold text-white mb-4\">Nhiệm Vụ Đã Hoàn Thành</h2>\r\n          <div \r\n            v-for=\"quest in completedQuests\" \r\n            :key=\"quest.id\"\r\n            class=\"bg-gray-900/50 backdrop-blur-sm rounded-xl border border-green-500/20 p-6 hover:border-green-500/40 transition-all duration-300\"\r\n          >\r\n            <div class=\"flex items-start justify-between\">\r\n              <div class=\"flex-1\">\r\n                <div class=\"flex items-center space-x-3 mb-3\">\r\n                  <h3 class=\"text-lg font-bold text-white\">{{ quest.displayName }}</h3>\r\n                  <span class=\"px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded-full\">\r\n                    Đã hoàn thành\r\n                  </span>\r\n                </div>\r\n                <p class=\"text-gray-300 mb-4\">{{ quest.description }}</p>\r\n                \r\n                <!-- Completion Date -->\r\n                <div class=\"text-sm text-gray-400\">\r\n                  Hoàn thành: {{ formatDate(quest.playerStatus.completedAt) }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Empty State -->\r\n        <div v-if=\"getCurrentQuests.length === 0\" class=\"text-center py-12\">\r\n          <div class=\"text-6xl mb-4\">📋</div>\r\n          <div class=\"text-xl text-gray-400 mb-2\">\r\n            {{ activeTab === 'available' ? 'Không có nhiệm vụ nào' : \r\n              activeTab === 'in_progress' ? 'Không có nhiệm vụ đang thực hiện' : \r\n              'Chưa hoàn thành nhiệm vụ nào' }}\r\n          </div>\r\n          <div class=\"text-sm text-gray-500\">\r\n            {{ activeTab === 'available' ? 'Hãy nâng cấp level để mở khóa nhiệm vụ mới' : \r\n              activeTab === 'in_progress' ? 'Hãy nhận nhiệm vụ để bắt đầu' : \r\n              'Hãy hoàn thành nhiệm vụ để xem lịch sử' }}\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Loading State -->\r\n        <div v-if=\"loading\" class=\"text-center py-12\">\r\n          <div class=\"animate-spin w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full mx-auto mb-4\"></div>\r\n          <div class=\"text-gray-400\">Đang tải nhiệm vụ...</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useQuestStore } from '~/stores/quest'\r\nimport { useAuthStore } from '~/stores/auth'\r\nimport { usePlayerStore } from '~/stores/player'\r\n\r\n// Stores\r\nconst questStore = useQuestStore()\r\nconst authStore = useAuthStore()\r\nconst playerStore = usePlayerStore()\r\n\r\n// Reactive data\r\nconst activeTab = ref('available')\r\n\r\nconst questTabs = ref([\r\n  { value: 'available', label: 'Có Thể Nhận', icon: '📋' },\r\n  { value: 'in_progress', label: 'Đang Thực Hiện', icon: '⏳' },\r\n  { value: 'completed', label: 'Đã Hoàn Thành', icon: '✅' },\r\n  { value: 'repeatable', label: 'Lặp Lại', icon: '🔄' },\r\n  { value: 'cooldown', label: 'Chờ Làm Mới', icon: '⏰' }\r\n])\r\n\r\n// Computed\r\nconst isAuthenticated = computed(() => authStore.isLoggedIn)\r\nconst player = computed(() => playerStore.player)\r\nconst loading = computed(() => questStore.loading)\r\nconst availableQuests = computed(() => questStore.availableQuests)\r\nconst inProgressQuests = computed(() => questStore.inProgressQuests)\r\nconst completedQuests = computed(() => questStore.completedQuests)\r\nconst repeatableQuests = computed(() => questStore.quests.filter(quest => quest.isRepeatable && quest.playerStatus.status === 'available'))\r\nconst cooldownQuests = computed(() => questStore.quests.filter(quest => quest.playerStatus.status === 'cooldown'))\r\n\r\nconst getCurrentQuests = computed(() => {\r\n  switch (activeTab.value) {\r\n    case 'available':\r\n      return availableQuests.value\r\n    case 'in_progress':\r\n      return inProgressQuests.value\r\n    case 'completed':\r\n      return completedQuests.value\r\n    case 'repeatable':\r\n      return repeatableQuests.value\r\n    case 'cooldown':\r\n      return cooldownQuests.value\r\n    default:\r\n      return []\r\n  }\r\n})\r\n\r\n// Methods\r\nconst refreshQuests = async () => {\r\n  if (player.value?.id) {\r\n    await questStore.fetchQuests(player.value.id)\r\n  }\r\n}\r\n\r\nconst startQuest = async (questId) => {\r\n  try {\r\n    const result = await questStore.startQuest(player.value.id, questId)\r\n    console.log('Nhiệm vụ đã được nhận:', result.quest.displayName)\r\n    \r\n    // Refresh player data\r\n    await playerStore.fetchResources(player.value.id)\r\n  } catch (err) {\r\n    console.error('Lỗi nhận nhiệm vụ:', err)\r\n  }\r\n}\r\n\r\nconst completeQuest = async (questId) => {\r\n  try {\r\n    const result = await questStore.completeQuest(player.value.id, questId)\r\n    console.log('Nhiệm vụ đã hoàn thành:', result.quest.displayName)\r\n    console.log('Phần thưởng:', result.rewards)\r\n    \r\n    if (result.levelUp) {\r\n      console.log(`🎉 Level Up! Level ${result.newLevel}`)\r\n    }\r\n    \r\n    // Refresh player data\r\n    await playerStore.fetchResources(player.value.id)\r\n  } catch (err) {\r\n    console.error('Lỗi hoàn thành nhiệm vụ:', err)\r\n  }\r\n}\r\n\r\nconst formatDate = (date) => {\r\n  if (!date) return 'Chưa xác định'\r\n  return new Date(date).toLocaleString('vi-VN')\r\n}\r\n\r\nconst getDifficultyText = (difficulty) => {\r\n  const difficultyMap = {\r\n    'easy': 'Dễ',\r\n    'medium': 'Trung Bình',\r\n    'hard': 'Khó',\r\n    'expert': 'Chuyên Gia'\r\n  }\r\n  return difficultyMap[difficulty] || difficulty\r\n}\r\n\r\nconst formatTime = (seconds) => {\r\n  if (!seconds) return '0s'\r\n  const minutes = Math.floor(seconds / 60)\r\n  const remainingSeconds = seconds % 60\r\n  if (minutes > 0) {\r\n    return `${minutes}m ${remainingSeconds}s`\r\n  }\r\n  return `${remainingSeconds}s`\r\n}\r\n\r\n// Initialize\r\nonMounted(async () => {\r\n  authStore.initializeAuth()\r\n  \r\n  if (isAuthenticated.value && player.value?.id) {\r\n    await questStore.fetchQuests(player.value.id)\r\n  }\r\n})\r\n</script>\r\n"],"version":3}