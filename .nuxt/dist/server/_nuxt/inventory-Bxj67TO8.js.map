{"version":3,"file":"inventory-Bxj67TO8.js","sources":["../../../../pages/inventory.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900\">\r\n    <!-- Header -->\r\n    <header class=\"bg-black/50 backdrop-blur-sm border-b border-purple-500/30\">\r\n      <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div class=\"flex items-center justify-between h-16\">\r\n          <!-- Logo & Title -->\r\n          <div class=\"flex items-center space-x-4\">\r\n            <NuxtLink to=\"/\" class=\"text-2xl font-bold text-white\">\r\n              üéí T√∫i ƒê·ªì\r\n            </NuxtLink>\r\n          </div>\r\n\r\n          <!-- Player Info -->\r\n          <div class=\"flex items-center space-x-6\">\r\n            <div class=\"text-center\">\r\n              <p class=\"text-sm text-game-text-secondary\">Ti√™n Ng·ªçc</p>\r\n              <p class=\"text-lg font-semibold text-yellow-400\">{{ getResourceAmount('tien_ngoc') }}</p>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <p class=\"text-sm text-game-text-secondary\">Linh Th·∫°ch</p>\r\n              <p class=\"text-lg font-semibold text-blue-400\">{{ getResourceAmount('linh_thach') }}</p>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <p class=\"text-sm text-game-text-secondary\">Nguy√™n Th·∫°ch</p>\r\n              <p class=\"text-lg font-semibold text-green-400\">{{ getResourceAmount('nguyen_thach') }}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Actions -->\r\n          <div class=\"flex items-center space-x-2\">\r\n            <NuxtLink to=\"/\" class=\"game-button px-6 py-2 rounded-lg text-white font-semibold\">\r\n              üè† Trang Ch·ªß\r\n            </NuxtLink>\r\n            <button @click=\"handleLogout\" class=\"game-button px-6 py-2 rounded-lg text-white font-semibold\">\r\n              üö™ ƒêƒÉng Xu·∫•t\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n\r\n    <main class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      <!-- Inventory Stats -->\r\n      <div class=\"mb-8\">\r\n        <div class=\"game-card p-6 rounded-lg\">\r\n          <h2 class=\"text-2xl font-bold text-white mb-4\">Th·ªëng K√™ T√∫i ƒê·ªì</h2>\r\n          <div class=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n            <div class=\"text-center\">\r\n              <div class=\"text-2xl font-bold text-blue-400\">{{ getTotalItems }}</div>\r\n              <div class=\"text-sm text-game-text-secondary\">T·ªïng Items</div>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <div class=\"text-2xl font-bold text-green-400\">{{ Object.keys(groupedInventory).length }}</div>\r\n              <div class=\"text-sm text-game-text-secondary\">Lo·∫°i Items</div>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <div class=\"text-2xl font-bold text-purple-400\">{{ getEquipmentCount }}</div>\r\n              <div class=\"text-sm text-game-text-secondary\">Trang B·ªã</div>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <div class=\"text-2xl font-bold text-yellow-400\">{{ getConsumableCount }}</div>\r\n              <div class=\"text-sm text-game-text-secondary\">Ti√™u Hao</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Item Categories -->\r\n      <div class=\"mb-8\">\r\n        <h2 class=\"text-2xl font-bold text-white mb-4\">Danh M·ª•c Items</h2>\r\n        <div class=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n          <button\r\n            v-for=\"category in itemCategories\"\r\n            :key=\"category.type\"\r\n            @click=\"selectedCategory = category.type\"\r\n            :class=\"[\r\n              'p-4 rounded-lg border-2 transition-all duration-300',\r\n              selectedCategory === category.type\r\n                ? 'border-purple-500 bg-purple-500/20'\r\n                : 'border-gray-600 bg-gray-800/50 hover:border-purple-400'\r\n            ]\"\r\n          >\r\n            <div class=\"text-center\">\r\n              <div class=\"text-3xl mb-2\">{{ category.icon }}</div>\r\n              <div class=\"text-sm font-semibold text-white\">{{ category.name }}</div>\r\n              <div class=\"text-xs text-game-text-secondary\">{{ getItemCount(category.type) }} items</div>\r\n            </div>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Loading -->\r\n      <div v-if=\"loading\" class=\"text-center py-8\">\r\n        <div class=\"text-white\">ƒêang t·∫£i t√∫i ƒë·ªì...</div>\r\n      </div>\r\n\r\n      <!-- Error -->\r\n      <div v-else-if=\"error\" class=\"text-center py-8\">\r\n        <div class=\"text-red-400\">L·ªói: {{ error }}</div>\r\n      </div>\r\n\r\n      <!-- Empty Inventory -->\r\n      <div v-else-if=\"filteredItems.length === 0\" class=\"text-center py-12\">\r\n        <div class=\"text-6xl mb-4\">üì¶</div>\r\n        <div class=\"text-xl text-white mb-2\">T√∫i ƒë·ªì tr·ªëng</div>\r\n        <div class=\"text-game-text-secondary\">H√£y mua s·∫Øm t·∫°i c·ª≠a h√†ng ƒë·ªÉ c√≥ items!</div>\r\n        <NuxtLink to=\"/shop\" class=\"inline-block mt-4 game-button px-6 py-2 rounded-lg text-white font-semibold\">\r\n          üè™ ƒê·∫øn C·ª≠a H√†ng\r\n        </NuxtLink>\r\n      </div>\r\n\r\n      <!-- Items Grid -->\r\n      <div v-else class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\r\n        <div\r\n          v-for=\"item in filteredItems\"\r\n          :key=\"item.id\"\r\n          class=\"bg-gray-800/50 p-4 rounded-lg border border-gray-700 hover:border-purple-500/50 transition-all duration-300\"\r\n        >\r\n          <div class=\"flex items-start justify-between mb-3\">\r\n            <div class=\"flex items-center space-x-3\">\r\n              <span class=\"text-2xl\">{{ getItemTypeIcon(item.itemType) }}</span>\r\n              <div>\r\n                <h4 class=\"text-lg font-semibold text-white\">{{ item.name }}</h4>\r\n                <div class=\"text-xs text-game-text-secondary\">{{ getItemTypeName(item.itemType) }}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"mb-3\">\r\n            <div class=\"flex items-center justify-between\">\r\n              <span class=\"text-sm text-game-text-secondary\">S·ªë l∆∞·ª£ng:</span>\r\n              <span class=\"text-sm font-semibold text-white\">{{ item.quantity }}</span>\r\n            </div>\r\n            <div v-if=\"item.stackable\" class=\"flex items-center justify-between\">\r\n              <span class=\"text-sm text-game-text-secondary\">C√≥ th·ªÉ x·∫øp ch·ªìng:</span>\r\n              <span class=\"text-sm text-green-400\">‚úì</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"flex items-center space-x-2\">\r\n            <button\r\n              @click=\"useItem(item)\"\r\n              :disabled=\"!canUseItem(item)\"\r\n              class=\"flex-1 px-3 py-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed rounded text-sm font-semibold text-white\"\r\n            >\r\n              S·ª≠ D·ª•ng\r\n            </button>\r\n            <button\r\n              @click=\"dropItem(item)\"\r\n              class=\"px-3 py-2 bg-red-600 hover:bg-red-700 rounded text-sm font-semibold text-white\"\r\n            >\r\n              V·ª©t\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// Stores\r\nconst authStore = useAuthStore()\r\nconst playerStore = usePlayerStore()\r\nconst shopStore = useShopStore()\r\n\r\n// Computed\r\nconst isAuthenticated = computed(() => authStore.isLoggedIn)\r\nconst player = computed(() => playerStore.player)\r\nconst resources = computed(() => playerStore.resources)\r\nconst inventory = computed(() => shopStore.inventory)\r\nconst groupedInventory = computed(() => shopStore.groupedInventory)\r\nconst loading = computed(() => shopStore.loading)\r\nconst error = computed(() => shopStore.error)\r\nconst getTotalItems = computed(() => shopStore.getTotalItems)\r\n\r\n// State\r\nconst selectedCategory = ref('all')\r\n\r\n// Item categories\r\nconst itemCategories = [\r\n  { type: 'all', name: 'T·∫•t C·∫£', icon: 'üì¶' },\r\n  { type: 'equipment', name: 'Trang B·ªã', icon: '‚öîÔ∏è' },\r\n  { type: 'consumable', name: 'Ti√™u Hao', icon: 'üß™' },\r\n  { type: 'material', name: 'Nguy√™n Li·ªáu', icon: 'üíé' },\r\n  { type: 'skill', name: 'K·ªπ NƒÉng', icon: 'üìú' },\r\n  { type: 'talent', name: 'Thi√™n Ph√∫', icon: '‚≠ê' }\r\n]\r\n\r\n// Computed\r\nconst filteredItems = computed(() => {\r\n  if (selectedCategory.value === 'all') {\r\n    return inventory.value\r\n  }\r\n  return inventory.value.filter(item => item.itemType === selectedCategory.value)\r\n})\r\n\r\nconst getEquipmentCount = computed(() => {\r\n  return inventory.value.filter(item => item.itemType === 'equipment').length\r\n})\r\n\r\nconst getConsumableCount = computed(() => {\r\n  return inventory.value.filter(item => item.itemType === 'consumable').length\r\n})\r\n\r\n// Methods\r\nconst getResourceAmount = (resourceName) => {\r\n  const resource = playerStore.getResourceByName(resourceName)\r\n  return resource ? Number(resource.amount).toLocaleString() : '0'\r\n}\r\n\r\nconst getItemTypeIcon = (itemType) => shopStore.getItemTypeIcon(itemType)\r\n\r\nconst getItemTypeName = (itemType) => {\r\n  const types = {\r\n    equipment: 'Trang B·ªã',\r\n    consumable: 'Ti√™u Hao',\r\n    material: 'Nguy√™n Li·ªáu',\r\n    skill: 'K·ªπ NƒÉng',\r\n    talent: 'Thi√™n Ph√∫'\r\n  }\r\n  return types[itemType] || itemType\r\n}\r\n\r\nconst getItemCount = (itemType) => {\r\n  if (itemType === 'all') {\r\n    return inventory.value.length\r\n  }\r\n  return inventory.value.filter(item => item.itemType === itemType).length\r\n}\r\n\r\nconst canUseItem = (item) => {\r\n  // Logic ƒë·ªÉ ki·ªÉm tra c√≥ th·ªÉ s·ª≠ d·ª•ng item kh√¥ng\r\n  return item.itemType === 'consumable' || item.itemType === 'equipment'\r\n}\r\n\r\nconst useItem = async (item) => {\r\n  if (!canUseItem(item)) return\r\n  \r\n  try {\r\n    // Logic s·ª≠ d·ª•ng item\r\n    console.log(`S·ª≠ d·ª•ng ${item.name}`)\r\n    \r\n    // Refresh inventory\r\n    if (player.value?.id) {\r\n      await shopStore.fetchInventory(player.value.id)\r\n    }\r\n  } catch (err) {\r\n    console.error('L·ªói s·ª≠ d·ª•ng item:', err)\r\n  }\r\n}\r\n\r\nconst dropItem = async (item) => {\r\n  if (!confirm(`B·∫°n c√≥ ch·∫Øc mu·ªën v·ª©t ${item.name}?`)) return\r\n  \r\n  try {\r\n    // Logic v·ª©t item\r\n    console.log(`V·ª©t ${item.name}`)\r\n    \r\n    // Refresh inventory\r\n    if (player.value?.id) {\r\n      await shopStore.fetchInventory(player.value.id)\r\n    }\r\n  } catch (err) {\r\n    console.error('L·ªói v·ª©t item:', err)\r\n  }\r\n}\r\n\r\nconst handleLogout = () => {\r\n  authStore.logout()\r\n  playerStore.reset()\r\n  shopStore.reset()\r\n}\r\n\r\n// Initialize on mount\r\nonMounted(async () => {\r\n  authStore.initializeAuth()\r\n  \r\n  if (isAuthenticated.value && authStore.user?.player) {\r\n    await playerStore.initializePlayer(authStore.user.player.id)\r\n    await shopStore.fetchInventory(authStore.user.player.id)\r\n  }\r\n})\r\n\r\n// Watch for authentication changes\r\nwatch(isAuthenticated, async (newValue) => {\r\n  if (newValue && authStore.user?.player) {\r\n    await playerStore.initializePlayer(authStore.user.player.id)\r\n    await shopStore.fetchInventory(authStore.user.player.id)\r\n  } else {\r\n    shopStore.reset()\r\n  }\r\n})\r\n</script>\r\n"],"names":["_ssrRenderAttrs","_mergeProps","_push","_parent","_unref","_ssrInterpolate","_ssrRenderList","_ssrIncludeBooleanAttr"],"mappings":"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"}