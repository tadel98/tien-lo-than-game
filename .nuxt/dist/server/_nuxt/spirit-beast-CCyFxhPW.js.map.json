{"file":"spirit-beast-CCyFxhPW.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_push","_parent","_ssrRenderList","_unref","_ssrInterpolate","_ssrRenderStyle","_ssrIncludeBooleanAttr"],"sources":["../../../../stores/spiritBeast.ts","../../../../pages/spirit-beast.vue"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport { ref } from 'vue'\r\n\r\nexport const useSpiritBeastStore = defineStore('spiritBeast', () => {\r\n  // State\r\n  const spiritBeasts = ref<any[]>([])\r\n  const beastTypes = ref<any[]>([])\r\n  const foods = ref<any[]>([])\r\n  const huntingGrounds = ref<any[]>([])\r\n  const recentHunting = ref<any[]>([])\r\n  const loading = ref(false)\r\n  const error = ref(null)\r\n\r\n  // Getters\r\n  const getBeastsByType = (typeId: string) => {\r\n    return spiritBeasts.value.filter(beast => beast.typeId === typeId)\r\n  }\r\n\r\n  const getActiveBeasts = () => {\r\n    return spiritBeasts.value.filter(beast => beast.isActive)\r\n  }\r\n\r\n  const getFightingBeasts = () => {\r\n    return spiritBeasts.value.filter(beast => beast.isFighting)\r\n  }\r\n\r\n  const getBeastTypeById = (id: string) => {\r\n    return beastTypes.value.find(type => type.id === id)\r\n  }\r\n\r\n  const getFoodById = (id: string) => {\r\n    return foods.value.find(food => food.id === id)\r\n  }\r\n\r\n  const getHuntingGroundById = (id: string) => {\r\n    return huntingGrounds.value.find(ground => ground.id === id)\r\n  }\r\n\r\n  const getCategoryColor = (category: string) => {\r\n    const colors = {\r\n      common: '#6b7280',\r\n      rare: '#3b82f6',\r\n      epic: '#8b5cf6',\r\n      legendary: '#f59e0b',\r\n      mythical: '#ef4444'\r\n    }\r\n    return colors[category] || '#6b7280'\r\n  }\r\n\r\n  const getDifficultyColor = (difficulty: string) => {\r\n    const colors = {\r\n      easy: '#10b981',\r\n      normal: '#f59e0b',\r\n      hard: '#f97316',\r\n      extreme: '#ef4444'\r\n    }\r\n    return colors[difficulty] || '#6b7280'\r\n  }\r\n\r\n  const getBeastStatusColor = (beast: any) => {\r\n    if (beast.health < 30) return '#ef4444' // red\r\n    if (beast.happiness < 30) return '#f97316' // orange\r\n    if (beast.hunger < 30) return '#f59e0b' // yellow\r\n    return '#10b981' // green\r\n  }\r\n\r\n  const getBeastStatusText = (beast: any) => {\r\n    if (beast.health < 30) return 'Bị thương'\r\n    if (beast.happiness < 30) return 'Buồn bã'\r\n    if (beast.hunger < 30) return 'Đói'\r\n    return 'Khỏe mạnh'\r\n  }\r\n\r\n  // Actions\r\n  const fetchSpiritBeastStatus = async (playerId: string) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n\r\n      const response: any = await $fetch(`/api/spirit-beast/status?playerId=${playerId}`)\r\n      \r\n      spiritBeasts.value = response.data.spiritBeasts\r\n      beastTypes.value = response.data.beastTypes\r\n      foods.value = response.data.foods\r\n      huntingGrounds.value = response.data.huntingGrounds\r\n      recentHunting.value = response.data.recentHunting\r\n    } catch (err: any) {\r\n      error.value = err.message\r\n      console.error('Error fetching spirit beast status:', err)\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  const huntBeast = async (playerId: string, groundId: string) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n\r\n      const data = await $fetch('/api/spirit-beast/hunt', {\r\n        method: 'POST',\r\n        body: {\r\n          playerId,\r\n          groundId\r\n        }\r\n      })\r\n\r\n      // Refresh spirit beast status after hunting\r\n      await fetchSpiritBeastStatus(playerId)\r\n\r\n      return data\r\n    } catch (err: any) {\r\n      error.value = err.message\r\n      console.error('Error hunting beast:', err)\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  const feedBeast = async (playerId: string, beastId: string, foodId: string, quantity: number = 1) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n\r\n      const data = await $fetch('/api/spirit-beast/feed', {\r\n        method: 'POST',\r\n        body: {\r\n          playerId,\r\n          beastId,\r\n          foodId,\r\n          quantity\r\n        }\r\n      })\r\n\r\n      // Refresh spirit beast status after feeding\r\n      await fetchSpiritBeastStatus(playerId)\r\n\r\n      return data\r\n    } catch (err: any) {\r\n      error.value = err.message\r\n      console.error('Error feeding beast:', err)\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  const canHuntAtGround = (ground: any, playerLevel: number) => {\r\n    return playerLevel >= ground.level\r\n  }\r\n\r\n  const getBeastStats = (beast: any) => {\r\n    try {\r\n      return JSON.parse(beast.stats)\r\n    } catch (e) {\r\n      return {}\r\n    }\r\n  }\r\n\r\n  const getBeastSkills = (beast: any) => {\r\n    try {\r\n      return beast.skills ? JSON.parse(beast.skills) : []\r\n    } catch (e) {\r\n      return []\r\n    }\r\n  }\r\n\r\n  const getFoodEffects = (food: any) => {\r\n    try {\r\n      return JSON.parse(food.effects)\r\n    } catch (e) {\r\n      return {}\r\n    }\r\n  }\r\n\r\n  const getGroundBeastTypes = (ground: any) => {\r\n    try {\r\n      return JSON.parse(ground.beastTypes)\r\n    } catch (e) {\r\n      return {}\r\n    }\r\n  }\r\n\r\n  const getGroundDropRates = (ground: any) => {\r\n    try {\r\n      return JSON.parse(ground.dropRates)\r\n    } catch (e) {\r\n      return {}\r\n    }\r\n  }\r\n\r\n  // Reset store\r\n  const reset = () => {\r\n    spiritBeasts.value = []\r\n    beastTypes.value = []\r\n    foods.value = []\r\n    huntingGrounds.value = []\r\n    recentHunting.value = []\r\n    loading.value = false\r\n    error.value = null\r\n  }\r\n\r\n  return {\r\n    // State\r\n    spiritBeasts,\r\n    beastTypes,\r\n    foods,\r\n    huntingGrounds,\r\n    recentHunting,\r\n    loading,\r\n    error,\r\n\r\n    // Getters\r\n    getBeastsByType,\r\n    getActiveBeasts,\r\n    getFightingBeasts,\r\n    getBeastTypeById,\r\n    getFoodById,\r\n    getHuntingGroundById,\r\n    getCategoryColor,\r\n    getDifficultyColor,\r\n    getBeastStatusColor,\r\n    getBeastStatusText,\r\n\r\n    // Actions\r\n    fetchSpiritBeastStatus,\r\n    huntBeast,\r\n    feedBeast,\r\n    canHuntAtGround,\r\n    getBeastStats,\r\n    getBeastSkills,\r\n    getFoodEffects,\r\n    getGroundBeastTypes,\r\n    getGroundDropRates,\r\n    reset\r\n  }\r\n})\r\n","<template>\r\n  <div class=\"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900\">\r\n    <!-- Header -->\r\n    <header class=\"bg-black/50 backdrop-blur-sm border-b border-purple-500/30\">\r\n      <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div class=\"flex items-center justify-between h-16\">\r\n          <!-- Logo & Title -->\r\n          <div class=\"flex items-center space-x-4\">\r\n            <NuxtLink to=\"/\" class=\"text-2xl font-bold text-white\">\r\n              🐾 Linh Thú\r\n            </NuxtLink>\r\n          </div>\r\n\r\n          <!-- Player Info -->\r\n          <div class=\"flex items-center space-x-6\">\r\n            <div class=\"text-center\">\r\n              <p class=\"text-sm text-game-text-secondary\">Tiên Ngọc</p>\r\n              <p class=\"text-lg font-semibold text-yellow-400\">{{ getResourceAmount('tien_ngoc') }}</p>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <p class=\"text-sm text-game-text-secondary\">Linh Thạch</p>\r\n              <p class=\"text-lg font-semibold text-blue-400\">{{ getResourceAmount('linh_thach') }}</p>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <p class=\"text-sm text-game-text-secondary\">Nguyên Thạch</p>\r\n              <p class=\"text-lg font-semibold text-green-400\">{{ getResourceAmount('nguyen_thach') }}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Actions -->\r\n          <div class=\"flex items-center space-x-2\">\r\n            <NuxtLink to=\"/\" class=\"game-button px-6 py-2 rounded-lg text-white font-semibold\">\r\n              🏠 Trang Chủ\r\n            </NuxtLink>\r\n            <button @click=\"handleLogout\" class=\"game-button px-6 py-2 rounded-lg text-white font-semibold\">\r\n              🚪 Đăng Xuất\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n\r\n    <main class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      <!-- Tabs -->\r\n      <div class=\"mb-8\">\r\n        <div class=\"flex space-x-1 bg-gray-800/50 p-1 rounded-lg\">\r\n          <button\r\n            v-for=\"tab in tabs\"\r\n            :key=\"tab.name\"\r\n            @click=\"activeTab = tab.name\"\r\n            :class=\"[\r\n              'flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-300',\r\n              activeTab === tab.name\r\n                ? 'bg-purple-600 text-white'\r\n                : 'text-gray-300 hover:text-white hover:bg-gray-700'\r\n            ]\"\r\n          >\r\n            <div class=\"flex items-center justify-center space-x-2\">\r\n              <span class=\"text-lg\">{{ tab.icon }}</span>\r\n              <span>{{ tab.displayName }}</span>\r\n            </div>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- My Beasts Tab -->\r\n      <div v-if=\"activeTab === 'beasts'\" class=\"space-y-8\">\r\n        <!-- Beast Stats -->\r\n        <div class=\"game-card p-6 rounded-lg\">\r\n          <h2 class=\"text-2xl font-bold text-white mb-4\">Thống Kê Linh Thú</h2>\r\n          <div class=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n            <div class=\"text-center\">\r\n              <div class=\"text-2xl font-bold text-blue-400\">{{ spiritBeasts.length }}</div>\r\n              <div class=\"text-sm text-game-text-secondary\">Tổng Linh Thú</div>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <div class=\"text-2xl font-bold text-green-400\">{{ getActiveBeasts.length }}</div>\r\n              <div class=\"text-sm text-game-text-secondary\">Đang Hoạt Động</div>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <div class=\"text-2xl font-bold text-purple-400\">{{ getFightingBeasts.length }}</div>\r\n              <div class=\"text-sm text-game-text-secondary\">Đang Chiến Đấu</div>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <div class=\"text-2xl font-bold text-yellow-400\">{{ getAverageLevel }}</div>\r\n              <div class=\"text-sm text-game-text-secondary\">Cấp Trung Bình</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Beasts Grid -->\r\n        <div v-if=\"spiritBeasts.length === 0\" class=\"text-center py-12\">\r\n          <div class=\"text-6xl mb-4\">🐾</div>\r\n          <div class=\"text-xl text-white mb-2\">Chưa có linh thú nào</div>\r\n          <div class=\"text-game-text-secondary\">Hãy đi săn để thu thập linh thú!</div>\r\n        </div>\r\n\r\n        <div v-else class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          <div\r\n            v-for=\"beast in spiritBeasts\"\r\n            :key=\"beast.id\"\r\n            class=\"bg-gray-800/50 p-6 rounded-lg border border-gray-700 hover:border-purple-500/50 transition-all duration-300\"\r\n          >\r\n            <div class=\"flex items-center justify-between mb-4\">\r\n              <div class=\"flex items-center space-x-3\">\r\n                <span class=\"text-3xl\">{{ beast.type.icon }}</span>\r\n                <div>\r\n                  <h3 class=\"text-lg font-semibold text-white\">{{ beast.name }}</h3>\r\n                  <div class=\"flex items-center space-x-2\">\r\n                    <span \r\n                      class=\"px-2 py-1 rounded text-xs font-semibold\"\r\n                      :style=\"{ \r\n                        backgroundColor: getCategoryColor(beast.type.category) + '20',\r\n                        color: getCategoryColor(beast.type.category)\r\n                      }\"\r\n                    >\r\n                      {{ beast.type.category.toUpperCase() }}\r\n                    </span>\r\n                    <span class=\"text-xs text-game-text-secondary\">Cấp {{ beast.level }}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Beast Status -->\r\n            <div class=\"mb-4 space-y-2\">\r\n              <div class=\"flex justify-between\">\r\n                <span class=\"text-sm text-game-text-secondary\">Sức khỏe:</span>\r\n                <div class=\"flex items-center space-x-2\">\r\n                  <div class=\"w-16 bg-gray-700 rounded-full h-2\">\r\n                    <div \r\n                      class=\"bg-red-500 h-2 rounded-full transition-all duration-300\"\r\n                      :style=\"{ width: `${beast.health}%` }\"\r\n                    ></div>\r\n                  </div>\r\n                  <span class=\"text-sm text-white\">{{ beast.health }}%</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"flex justify-between\">\r\n                <span class=\"text-sm text-game-text-secondary\">Hạnh phúc:</span>\r\n                <div class=\"flex items-center space-x-2\">\r\n                  <div class=\"w-16 bg-gray-700 rounded-full h-2\">\r\n                    <div \r\n                      class=\"bg-yellow-500 h-2 rounded-full transition-all duration-300\"\r\n                      :style=\"{ width: `${beast.happiness}%` }\"\r\n                    ></div>\r\n                  </div>\r\n                  <span class=\"text-sm text-white\">{{ beast.happiness }}%</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"flex justify-between\">\r\n                <span class=\"text-sm text-game-text-secondary\">Độ no:</span>\r\n                <div class=\"flex items-center space-x-2\">\r\n                  <div class=\"w-16 bg-gray-700 rounded-full h-2\">\r\n                    <div \r\n                      class=\"bg-green-500 h-2 rounded-full transition-all duration-300\"\r\n                      :style=\"{ width: `${beast.hunger}%` }\"\r\n                    ></div>\r\n                  </div>\r\n                  <span class=\"text-sm text-white\">{{ beast.hunger }}%</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Beast Stats -->\r\n            <div class=\"mb-4\">\r\n              <h4 class=\"text-sm font-semibold text-white mb-2\">Thống kê:</h4>\r\n              <div class=\"grid grid-cols-2 gap-2 text-xs\">\r\n                <div\r\n                  v-for=\"(value, stat) in getBeastStats(beast)\"\r\n                  :key=\"stat\"\r\n                  class=\"flex justify-between\"\r\n                >\r\n                  <span class=\"text-game-text-secondary\">{{ stat }}:</span>\r\n                  <span class=\"text-white\">{{ value }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Beast Actions -->\r\n            <div class=\"flex space-x-2\">\r\n              <button\r\n                @click=\"openFeedModal(beast)\"\r\n                :disabled=\"beast.hunger >= 100\"\r\n                class=\"flex-1 px-3 py-2 bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed rounded text-sm font-semibold text-white\"\r\n              >\r\n                Cho Ăn\r\n              </button>\r\n              <button\r\n                @click=\"playWithBeast(beast)\"\r\n                :disabled=\"beast.happiness >= 100\"\r\n                class=\"flex-1 px-3 py-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed rounded text-sm font-semibold text-white\"\r\n              >\r\n                Chơi\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Hunting Tab -->\r\n      <div v-if=\"activeTab === 'hunting'\" class=\"space-y-8\">\r\n        <div class=\"game-card p-6 rounded-lg\">\r\n          <h2 class=\"text-2xl font-bold text-white mb-4\">Khu Vực Săn</h2>\r\n          <div v-if=\"huntingGrounds.length === 0\" class=\"text-center py-8\">\r\n            <div class=\"text-game-text-secondary\">Chưa có khu vực săn nào</div>\r\n          </div>\r\n          <div v-else class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            <div\r\n              v-for=\"ground in huntingGrounds\"\r\n              :key=\"ground.id\"\r\n              class=\"bg-gray-800/50 p-6 rounded-lg border border-gray-700 hover:border-purple-500/50 transition-all duration-300\"\r\n            >\r\n              <div class=\"flex items-center justify-between mb-4\">\r\n                <h3 class=\"text-lg font-semibold text-white\">{{ ground.displayName }}</h3>\r\n                <span class=\"text-2xl\">{{ ground.icon }}</span>\r\n              </div>\r\n              \r\n              <p class=\"text-sm text-game-text-secondary mb-4\">{{ ground.description }}</p>\r\n              \r\n              <div class=\"mb-4 space-y-2\">\r\n                <div class=\"flex justify-between\">\r\n                  <span class=\"text-sm text-game-text-secondary\">Cấp độ yêu cầu:</span>\r\n                  <span class=\"text-sm text-white\">{{ ground.level }}</span>\r\n                </div>\r\n                <div class=\"flex justify-between\">\r\n                  <span class=\"text-sm text-game-text-secondary\">Độ khó:</span>\r\n                  <span \r\n                    class=\"text-sm font-semibold\"\r\n                    :style=\"{ color: getDifficultyColor(ground.difficulty) }\"\r\n                  >\r\n                    {{ ground.difficulty.toUpperCase() }}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                @click=\"huntAtGround(ground)\"\r\n                :disabled=\"!canHuntAtGround(ground, player?.level || 0) || loading\"\r\n                class=\"w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed rounded text-sm font-semibold text-white\"\r\n              >\r\n                {{ canHuntAtGround(ground, player?.level || 0) ? 'Đi Săn' : `Cần cấp ${ground.level}` }}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Feeding Tab -->\r\n      <div v-if=\"activeTab === 'feeding'\" class=\"space-y-8\">\r\n        <div class=\"game-card p-6 rounded-lg\">\r\n          <h2 class=\"text-2xl font-bold text-white mb-4\">Thức Ăn Linh Thú</h2>\r\n          <div v-if=\"foods.length === 0\" class=\"text-center py-8\">\r\n            <div class=\"text-game-text-secondary\">Chưa có thức ăn nào</div>\r\n          </div>\r\n          <div v-else class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            <div\r\n              v-for=\"food in foods\"\r\n              :key=\"food.id\"\r\n              class=\"bg-gray-800/50 p-6 rounded-lg border border-gray-700 hover:border-purple-500/50 transition-all duration-300\"\r\n            >\r\n              <div class=\"flex items-center justify-between mb-4\">\r\n                <h3 class=\"text-lg font-semibold text-white\">{{ food.displayName }}</h3>\r\n                <span class=\"text-2xl\">{{ food.icon }}</span>\r\n              </div>\r\n              \r\n              <p class=\"text-sm text-game-text-secondary mb-4\">{{ food.description }}</p>\r\n              \r\n              <div class=\"mb-4\">\r\n                <div class=\"flex justify-between mb-2\">\r\n                  <span class=\"text-sm text-game-text-secondary\">Giá:</span>\r\n                  <span class=\"text-sm text-white\">{{ food.price.toLocaleString() }} {{ getCurrencyName(food.currency) }}</span>\r\n                </div>\r\n                <div class=\"flex justify-between\">\r\n                  <span class=\"text-sm text-game-text-secondary\">Loại:</span>\r\n                  <span class=\"text-sm text-white\">{{ food.category }}</span>\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                @click=\"openFeedModal(null, food)\"\r\n                class=\"w-full px-4 py-2 bg-green-600 hover:bg-green-700 rounded text-sm font-semibold text-white\"\r\n              >\r\n                Mua & Cho Ăn\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Feed Modal -->\r\n      <div v-if=\"showFeedModal\" class=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n        <div class=\"bg-gray-900 rounded-lg max-w-md w-full\">\r\n          <div class=\"flex items-center justify-between p-6 border-b border-gray-700\">\r\n            <h2 class=\"text-xl font-bold text-white\">Cho Ăn Linh Thú</h2>\r\n            <button @click=\"closeFeedModal\" class=\"text-gray-400 hover:text-white text-2xl\">\r\n              ✕\r\n            </button>\r\n          </div>\r\n          \r\n          <div class=\"p-6\">\r\n            <div v-if=\"selectedBeast\" class=\"mb-4\">\r\n              <div class=\"flex items-center space-x-3 mb-4\">\r\n                <span class=\"text-2xl\">{{ selectedBeast.type.icon }}</span>\r\n                <div>\r\n                  <div class=\"text-white font-semibold\">{{ selectedBeast.name }}</div>\r\n                  <div class=\"text-sm text-game-text-secondary\">{{ selectedBeast.type.displayName }}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div v-if=\"selectedFood\" class=\"mb-4\">\r\n              <div class=\"flex items-center space-x-3 mb-4\">\r\n                <span class=\"text-2xl\">{{ selectedFood.icon }}</span>\r\n                <div>\r\n                  <div class=\"text-white font-semibold\">{{ selectedFood.displayName }}</div>\r\n                  <div class=\"text-sm text-game-text-secondary\">{{ selectedFood.description }}</div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"mb-4\">\r\n                <label class=\"block text-sm text-game-text-secondary mb-2\">Số lượng:</label>\r\n                <input\r\n                  v-model.number=\"feedQuantity\"\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  max=\"10\"\r\n                  class=\"w-full px-3 py-2 bg-gray-700 text-white rounded\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"flex space-x-2\">\r\n              <button\r\n                @click=\"confirmFeed\"\r\n                :disabled=\"loading\"\r\n                class=\"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed rounded text-sm font-semibold text-white\"\r\n              >\r\n                {{ loading ? 'Đang xử lý...' : 'Xác nhận' }}\r\n              </button>\r\n              <button\r\n                @click=\"closeFeedModal\"\r\n                class=\"flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded text-sm font-semibold text-white\"\r\n              >\r\n                Hủy\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// Stores\r\nconst authStore = useAuthStore()\r\nconst playerStore = usePlayerStore()\r\nconst spiritBeastStore = useSpiritBeastStore()\r\n\r\n// Computed\r\nconst isAuthenticated = computed(() => authStore.isLoggedIn)\r\nconst player = computed(() => playerStore.player)\r\nconst resources = computed(() => playerStore.resources)\r\nconst spiritBeasts = computed(() => spiritBeastStore.spiritBeasts)\r\nconst beastTypes = computed(() => spiritBeastStore.beastTypes)\r\nconst foods = computed(() => spiritBeastStore.foods)\r\nconst huntingGrounds = computed(() => spiritBeastStore.huntingGrounds)\r\nconst recentHunting = computed(() => spiritBeastStore.recentHunting)\r\nconst loading = computed(() => spiritBeastStore.loading)\r\nconst error = computed(() => spiritBeastStore.error)\r\n\r\n// State\r\nconst activeTab = ref('beasts')\r\nconst showFeedModal = ref(false)\r\nconst selectedBeast = ref(null)\r\nconst selectedFood = ref(null)\r\nconst feedQuantity = ref(1)\r\n\r\n// Tabs\r\nconst tabs = [\r\n  { name: 'beasts', displayName: 'Linh Thú', icon: '🐾' },\r\n  { name: 'hunting', displayName: 'Săn Bắt', icon: '🏹' },\r\n  { name: 'feeding', displayName: 'Cho Ăn', icon: '🍖' }\r\n]\r\n\r\n// Computed\r\nconst getActiveBeasts = computed(() => spiritBeastStore.getActiveBeasts())\r\nconst getFightingBeasts = computed(() => spiritBeastStore.getFightingBeasts())\r\nconst getAverageLevel = computed(() => {\r\n  if (spiritBeasts.value.length === 0) return 0\r\n  const totalLevel = spiritBeasts.value.reduce((sum, beast) => sum + beast.level, 0)\r\n  return Math.round(totalLevel / spiritBeasts.value.length)\r\n})\r\n\r\n// Methods\r\nconst getResourceAmount = (resourceName) => {\r\n  const resource = playerStore.getResourceByName(resourceName)\r\n  return resource ? Number(resource.amount).toLocaleString() : '0'\r\n}\r\n\r\nconst getCategoryColor = (category) => spiritBeastStore.getCategoryColor(category)\r\nconst getDifficultyColor = (difficulty) => spiritBeastStore.getDifficultyColor(difficulty)\r\nconst canHuntAtGround = (ground, playerLevel) => spiritBeastStore.canHuntAtGround(ground, playerLevel)\r\nconst getBeastStats = (beast) => spiritBeastStore.getBeastStats(beast)\r\n\r\nconst getCurrencyName = (currency) => {\r\n  const currencies = {\r\n    tien_ngoc: 'Tiên Ngọc',\r\n    linh_thach: 'Linh Thạch',\r\n    nguyen_thach: 'Nguyên Thạch'\r\n  }\r\n  return currencies[currency] || currency\r\n}\r\n\r\nconst huntAtGround = async (ground) => {\r\n  if (!player.value?.id) return\r\n  \r\n  try {\r\n    const result = await spiritBeastStore.huntBeast(player.value.id, ground.id)\r\n    \r\n    if (result.success) {\r\n      console.log(`Săn thành công tại ${ground.displayName}!`)\r\n      if (result.beast) {\r\n        console.log(`Bắt được: ${result.beast.name}`)\r\n      }\r\n    } else {\r\n      console.log(`Săn thất bại tại ${ground.displayName}`)\r\n    }\r\n  } catch (err) {\r\n    console.error('Lỗi săn linh thú:', err)\r\n  }\r\n}\r\n\r\nconst openFeedModal = (beast, food) => {\r\n  selectedBeast.value = beast\r\n  selectedFood.value = food\r\n  showFeedModal.value = true\r\n  feedQuantity.value = 1\r\n}\r\n\r\nconst closeFeedModal = () => {\r\n  showFeedModal.value = false\r\n  selectedBeast.value = null\r\n  selectedFood.value = null\r\n  feedQuantity.value = 1\r\n}\r\n\r\nconst confirmFeed = async () => {\r\n  if (!player.value?.id || !selectedBeast.value || !selectedFood.value) return\r\n  \r\n  try {\r\n    await spiritBeastStore.feedBeast(\r\n      player.value.id,\r\n      selectedBeast.value.id,\r\n      selectedFood.value.id,\r\n      feedQuantity.value\r\n    )\r\n    \r\n    // Refresh player resources\r\n    await playerStore.fetchResources(player.value.id)\r\n    \r\n    console.log(`Cho ăn thành công: ${selectedBeast.value.name}`)\r\n    closeFeedModal()\r\n  } catch (err) {\r\n    console.error('Lỗi cho ăn:', err)\r\n  }\r\n}\r\n\r\nconst playWithBeast = async (beast) => {\r\n  // Logic chơi với linh thú\r\n  console.log(`Chơi với ${beast.name}`)\r\n}\r\n\r\nconst handleLogout = () => {\r\n  authStore.logout()\r\n  playerStore.reset()\r\n  spiritBeastStore.reset()\r\n}\r\n\r\n// Initialize on mount\r\nonMounted(async () => {\r\n  authStore.initializeAuth()\r\n  \r\n  if (isAuthenticated.value && authStore.user?.player) {\r\n    await playerStore.initializePlayer(authStore.user.player.id)\r\n    await spiritBeastStore.fetchSpiritBeastStatus(authStore.user.player.id)\r\n  }\r\n})\r\n\r\n// Watch for authentication changes\r\nwatch(isAuthenticated, async (newValue) => {\r\n  if (newValue && authStore.user?.player) {\r\n    await playerStore.initializePlayer(authStore.user.player.id)\r\n    await spiritBeastStore.fetchSpiritBeastStatus(authStore.user.player.id)\r\n  } else {\r\n    spiritBeastStore.reset()\r\n  }\r\n})\r\n</script>\r\n"],"version":3}