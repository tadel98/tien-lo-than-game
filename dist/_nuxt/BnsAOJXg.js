import{_ as D}from"./D1ZCJ6tb.js";import{u as K}from"./CWJf_NK_.js";import{u as E}from"./C9N9uCYs.js";import{u as F}from"./yAfczJOT.js";import{g as l,r as M,j as R,k as O,c as d,a as t,b as _,w as v,t as n,n as a,F as I,m as C,o as c,d as h,p as U,l as X}from"#entry";const G={class:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900"},J={class:"bg-black/50 backdrop-blur-sm border-b border-purple-500/30"},Q={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},W={class:"flex items-center justify-between h-16"},Y={class:"flex items-center space-x-4"},Z={class:"flex items-center space-x-6"},tt={class:"text-center"},et={class:"text-lg font-semibold text-yellow-400"},st={class:"text-center"},ot={class:"text-lg font-semibold text-blue-400"},nt={class:"text-center"},it={class:"text-lg font-semibold text-green-400"},lt={class:"flex items-center space-x-2"},at={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},rt={class:"mb-8"},dt={class:"game-card p-6 rounded-lg"},ct={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},xt={class:"text-center"},mt={class:"text-2xl font-bold text-blue-400"},ut={class:"text-center"},pt={class:"text-2xl font-bold text-green-400"},gt={class:"text-center"},yt={class:"text-2xl font-bold text-purple-400"},_t={class:"text-center"},vt={class:"text-2xl font-bold text-yellow-400"},ht={class:"mb-8"},bt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},ft=["onClick"],wt={class:"text-center"},Tt={class:"text-3xl mb-2"},kt={class:"text-sm font-semibold text-white"},It={class:"text-xs text-game-text-secondary"},Ct={key:0,class:"text-center py-8"},Nt={key:1,class:"text-center py-8"},Lt={class:"text-red-400"},St={key:2,class:"text-center py-12"},Bt={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},jt={class:"flex items-start justify-between mb-3"},qt={class:"flex items-center space-x-3"},Vt={class:"text-2xl"},$t={class:"text-lg font-semibold text-white"},Ht={class:"text-xs text-game-text-secondary"},Pt={class:"mb-3"},zt={class:"flex items-center justify-between"},At={class:"text-sm font-semibold text-white"},Dt={key:0,class:"flex items-center justify-between"},Kt={class:"flex items-center space-x-2"},Et=["onClick","disabled"],Ft=["onClick"],Jt={__name:"inventory",setup(Mt){const r=K(),x=E(),i=F(),b=l(()=>r.isLoggedIn),u=l(()=>x.player);l(()=>x.resources);const m=l(()=>i.inventory),N=l(()=>i.groupedInventory),L=l(()=>i.loading),f=l(()=>i.error),S=l(()=>i.getTotalItems),p=M("all"),B=[{type:"all",name:"Tất Cả",icon:"📦"},{type:"equipment",name:"Trang Bị",icon:"⚔️"},{type:"consumable",name:"Tiêu Hao",icon:"🧪"},{type:"material",name:"Nguyên Liệu",icon:"💎"},{type:"skill",name:"Kỹ Năng",icon:"📜"},{type:"talent",name:"Thiên Phú",icon:"⭐"}],w=l(()=>p.value==="all"?m.value:m.value.filter(s=>s.itemType===p.value)),j=l(()=>m.value.filter(s=>s.itemType==="equipment").length),q=l(()=>m.value.filter(s=>s.itemType==="consumable").length),g=s=>{const e=x.getResourceByName(s);return e?Number(e.amount).toLocaleString():"0"},V=s=>i.getItemTypeIcon(s),$=s=>({equipment:"Trang Bị",consumable:"Tiêu Hao",material:"Nguyên Liệu",skill:"Kỹ Năng",talent:"Thiên Phú"})[s]||s,H=s=>s==="all"?m.value.length:m.value.filter(e=>e.itemType===s).length,T=s=>s.itemType==="consumable"||s.itemType==="equipment",P=async s=>{if(T(s))try{console.log(`Sử dụng ${s.name}`),u.value?.id&&await i.fetchInventory(u.value.id)}catch(e){console.error("Lỗi sử dụng item:",e)}},z=async s=>{if(confirm(`Bạn có chắc muốn vứt ${s.name}?`))try{console.log(`Vứt ${s.name}`),u.value?.id&&await i.fetchInventory(u.value.id)}catch(e){console.error("Lỗi vứt item:",e)}},A=()=>{r.logout(),x.reset(),i.reset()};return R(async()=>{r.initializeAuth(),b.value&&r.user?.player&&(await x.initializePlayer(r.user.player.id),await i.fetchInventory(r.user.player.id))}),O(b,async s=>{s&&r.user?.player?(await x.initializePlayer(r.user.player.id),await i.fetchInventory(r.user.player.id)):i.reset()}),(s,e)=>{const y=D;return c(),d("div",G,[t("header",J,[t("div",Q,[t("div",W,[t("div",Y,[_(y,{to:"/",class:"text-2xl font-bold text-white"},{default:v(()=>[...e[0]||(e[0]=[h(" 🎒 Túi Đồ ",-1)])]),_:1})]),t("div",Z,[t("div",tt,[e[1]||(e[1]=t("p",{class:"text-sm text-game-text-secondary"},"Tiên Ngọc",-1)),t("p",et,n(g("tien_ngoc")),1)]),t("div",st,[e[2]||(e[2]=t("p",{class:"text-sm text-game-text-secondary"},"Linh Thạch",-1)),t("p",ot,n(g("linh_thach")),1)]),t("div",nt,[e[3]||(e[3]=t("p",{class:"text-sm text-game-text-secondary"},"Nguyên Thạch",-1)),t("p",it,n(g("nguyen_thach")),1)])]),t("div",lt,[_(y,{to:"/",class:"game-button px-6 py-2 rounded-lg text-white font-semibold"},{default:v(()=>[...e[4]||(e[4]=[h(" 🏠 Trang Chủ ",-1)])]),_:1}),t("button",{onClick:A,class:"game-button px-6 py-2 rounded-lg text-white font-semibold"}," 🚪 Đăng Xuất ")])])])]),t("main",at,[t("div",rt,[t("div",dt,[e[9]||(e[9]=t("h2",{class:"text-2xl font-bold text-white mb-4"},"Thống Kê Túi Đồ",-1)),t("div",ct,[t("div",xt,[t("div",mt,n(a(S)),1),e[5]||(e[5]=t("div",{class:"text-sm text-game-text-secondary"},"Tổng Items",-1))]),t("div",ut,[t("div",pt,n(Object.keys(a(N)).length),1),e[6]||(e[6]=t("div",{class:"text-sm text-game-text-secondary"},"Loại Items",-1))]),t("div",gt,[t("div",yt,n(a(j)),1),e[7]||(e[7]=t("div",{class:"text-sm text-game-text-secondary"},"Trang Bị",-1))]),t("div",_t,[t("div",vt,n(a(q)),1),e[8]||(e[8]=t("div",{class:"text-sm text-game-text-secondary"},"Tiêu Hao",-1))])])])]),t("div",ht,[e[10]||(e[10]=t("h2",{class:"text-2xl font-bold text-white mb-4"},"Danh Mục Items",-1)),t("div",bt,[(c(),d(I,null,C(B,o=>t("button",{key:o.type,onClick:k=>p.value=o.type,class:U(["p-4 rounded-lg border-2 transition-all duration-300",a(p)===o.type?"border-purple-500 bg-purple-500/20":"border-gray-600 bg-gray-800/50 hover:border-purple-400"])},[t("div",wt,[t("div",Tt,n(o.icon),1),t("div",kt,n(o.name),1),t("div",It,n(H(o.type))+" items",1)])],10,ft)),64))])]),a(L)?(c(),d("div",Ct,[...e[11]||(e[11]=[t("div",{class:"text-white"},"Đang tải túi đồ...",-1)])])):a(f)?(c(),d("div",Nt,[t("div",Lt,"Lỗi: "+n(a(f)),1)])):a(w).length===0?(c(),d("div",St,[e[13]||(e[13]=t("div",{class:"text-6xl mb-4"},"📦",-1)),e[14]||(e[14]=t("div",{class:"text-xl text-white mb-2"},"Túi đồ trống",-1)),e[15]||(e[15]=t("div",{class:"text-game-text-secondary"},"Hãy mua sắm tại cửa hàng để có items!",-1)),_(y,{to:"/shop",class:"inline-block mt-4 game-button px-6 py-2 rounded-lg text-white font-semibold"},{default:v(()=>[...e[12]||(e[12]=[h(" 🏪 Đến Cửa Hàng ",-1)])]),_:1})])):(c(),d("div",Bt,[(c(!0),d(I,null,C(a(w),o=>(c(),d("div",{key:o.id,class:"bg-gray-800/50 p-4 rounded-lg border border-gray-700 hover:border-purple-500/50 transition-all duration-300"},[t("div",jt,[t("div",qt,[t("span",Vt,n(V(o.itemType)),1),t("div",null,[t("h4",$t,n(o.name),1),t("div",Ht,n($(o.itemType)),1)])])]),t("div",Pt,[t("div",zt,[e[16]||(e[16]=t("span",{class:"text-sm text-game-text-secondary"},"Số lượng:",-1)),t("span",At,n(o.quantity),1)]),o.stackable?(c(),d("div",Dt,[...e[17]||(e[17]=[t("span",{class:"text-sm text-game-text-secondary"},"Có thể xếp chồng:",-1),t("span",{class:"text-sm text-green-400"},"✓",-1)])])):X("",!0)]),t("div",Kt,[t("button",{onClick:k=>P(o),disabled:!T(o),class:"flex-1 px-3 py-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed rounded text-sm font-semibold text-white"}," Sử Dụng ",8,Et),t("button",{onClick:k=>z(o),class:"px-3 py-2 bg-red-600 hover:bg-red-700 rounded text-sm font-semibold text-white"}," Vứt ",8,Ft)])]))),128))]))])])}}};export{Jt as default};
