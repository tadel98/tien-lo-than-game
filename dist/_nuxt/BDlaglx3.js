import{z as b,r as o,g as n}from"#entry";const $=b("character",()=>{const f=o(null),s=o(null),c=o([]),u=o([]),r=o(!1),l=o(null),p=n(()=>s.value?.combatPower||0),v=n(()=>s.value?.total||{}),d=n(()=>s.value?.base||{}),h=n(()=>c.value.filter(t=>t.isEquipped)),m=n(()=>u.value.filter(t=>t.isLearned)),i=async t=>{try{r.value=!0,l.value=null;const a=await $fetch(`/api/character/stats?playerId=${t}`);f.value=a.data.player,s.value=a.data.stats,c.value=a.data.equipment,u.value=a.data.skills}catch(a){l.value=a.message,console.error("Error fetching character data:",a)}finally{r.value=!1}};return{characterData:f,stats:s,equipment:c,skills:u,loading:r,error:l,combatPower:p,totalStats:v,baseStats:d,equippedItems:h,learnedSkills:m,fetchCharacterData:i,updateStats:async(t,a)=>{try{r.value=!0,l.value=null;const e=await $fetch("/api/character/stats/update",{method:"POST",body:{playerId:t,stats:a}});return s.value&&Object.assign(s.value.base,a),e.data}catch(e){throw l.value=e.message,console.error("Error updating stats:",e),e}finally{r.value=!1}},equipItem:async(t,a)=>{try{r.value=!0,l.value=null;const e=await $fetch("/api/character/equipment/equip",{method:"POST",body:{playerId:t,equipmentId:a}});return await i(t),e.data}catch(e){throw l.value=e.message,console.error("Error equipping item:",e),e}finally{r.value=!1}},unequipItem:async(t,a)=>{try{r.value=!0,l.value=null;const e=await $fetch("/api/character/equipment/unequip",{method:"POST",body:{playerId:t,equipmentId:a}});return await i(t),e.data}catch(e){throw l.value=e.message,console.error("Error unequipping item:",e),e}finally{r.value=!1}},learnSkill:async(t,a)=>{try{r.value=!0,l.value=null;const e=await $fetch("/api/character/skills/learn",{method:"POST",body:{playerId:t,skillId:a}});return await i(t),e.data}catch(e){throw l.value=e.message,console.error("Error learning skill:",e),e}finally{r.value=!1}},getStatColor:t=>({hp:"#ef4444",mp:"#3b82f6",attack:"#f59e0b",defense:"#10b981",speed:"#8b5cf6",luck:"#f97316",wisdom:"#06b6d4",strength:"#84cc16",agility:"#ec4899",vitality:"#14b8a6",spirit:"#6366f1"})[t]||"#6b7280",getRarityColor:t=>({common:"#6b7280",uncommon:"#10b981",rare:"#3b82f6",epic:"#8b5cf6",legendary:"#f59e0b"})[t]||"#6b7280",getSkillCategoryColor:t=>({combat:"#ef4444",cultivation:"#8b5cf6",crafting:"#f59e0b",passive:"#10b981",buff:"#06b6d4",debuff:"#f97316"})[t]||"#6b7280",reset:()=>{f.value=null,s.value=null,c.value=[],u.value=[],r.value=!1,l.value=null}}});export{$ as u};
