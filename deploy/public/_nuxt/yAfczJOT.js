import{z as g,r as a,g as d}from"#entry";const T=g("shop",()=>{const s=a([]),u=a(null),l=a([]),c=a({}),r=a(!1),o=a(null),v=e=>s.value.filter(t=>t.category===e),y=e=>c.value[e]||[],h=d(()=>l.value.reduce((e,t)=>e+t.quantity,0)),f=async e=>{try{r.value=!0,o.value=null;const t=e?`?category=${e}`:"",i=await $fetch(`/api/shop/list${t}`);s.value=i.data}catch(t){o.value=t.message,console.error("Error fetching shops:",t)}finally{r.value=!1}},p=async e=>{try{r.value=!0,o.value=null;const t=await $fetch(`/api/inventory/list?playerId=${e}`);l.value=t.data.inventory,c.value=t.data.grouped}catch(t){o.value=t.message,console.error("Error fetching inventory:",t)}finally{r.value=!1}};return{shops:s,currentShop:u,inventory:l,groupedInventory:c,loading:r,error:o,getShopByCategory:v,getInventoryByType:y,getTotalItems:h,fetchShops:f,fetchInventory:p,purchaseItem:async(e,t,i,m=1)=>{try{r.value=!0,o.value=null;const n=await $fetch("/api/shop/purchase",{method:"POST",body:{playerId:e,shopId:t,itemId:i,quantity:m}});return await p(e),n.data}catch(n){throw o.value=n.message,console.error("Error purchasing item:",n),n}finally{r.value=!1}},setCurrentShop:e=>{u.value=e},getRarityColor:e=>({common:"#6b7280",uncommon:"#10b981",rare:"#3b82f6",epic:"#8b5cf6",legendary:"#f59e0b"})[e]||"#6b7280",getItemTypeIcon:e=>({equipment:"âš”ï¸",consumable:"ðŸ§ª",material:"ðŸ’Ž",skill:"ðŸ“œ",talent:"â­"})[e]||"ðŸ“¦",reset:()=>{s.value=[],u.value=null,l.value=[],c.value={},r.value=!1,o.value=null}}});export{T as u};
