import{C as k,r as x,g as f,j as N,c as n,o as i,a as e,l as p,t as d,n as t,D as _,s as u,v as m}from"#entry";import{u as S}from"./CWJf_NK_.js";import{u as V}from"./C9N9uCYs.js";const M={class:"min-h-screen flex items-center justify-center bg-game-dark"},q={class:"game-card max-w-md w-full mx-4 p-8 rounded-lg"},C={class:"text-2xl font-bold text-center mb-6 text-white"},U={key:0},A={key:1},B=["disabled"],D={class:"text-center mt-4"},L={key:0,class:"mt-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg"},T={class:"text-red-400 text-sm"},P={__name:"LoginForm",setup(j){const r=S(),y=V(),c=k(),a=x(!0),s=x({username:"",email:"",password:"",playerName:""}),g=f(()=>r.loading),b=f(()=>r.error),w=()=>{a.value=!a.value,s.value={username:"",email:"",password:"",playerName:""},r.reset()},v=async()=>{try{a.value?await r.login(s.value.username,s.value.password):await r.register(s.value.username,s.value.email,s.value.password,s.value.playerName),r.user?.player&&await y.initializePlayer(r.user.player.id),await c.push("/")}catch(h){console.error("Auth error:",h)}};return N(()=>{r.initializeAuth(),r.isLoggedIn&&c.push("/")}),(h,o)=>(i(),n("div",M,[e("div",q,[e("h2",C,d(t(a)?"Đăng Nhập":"Đăng Ký"),1),e("form",{onSubmit:_(v,["prevent"]),class:"space-y-4"},[e("div",null,[o[4]||(o[4]=e("label",{class:"block text-sm font-medium text-game-text-secondary mb-2"}," Tên đăng nhập ",-1)),u(e("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>t(s).username=l),type:"text",required:"",class:"w-full px-3 py-2 bg-game-light border border-white/20 rounded-lg text-white focus:outline-none focus:border-game-accent",placeholder:"Nhập tên đăng nhập"},null,512),[[m,t(s).username]])]),t(a)?p("",!0):(i(),n("div",U,[o[5]||(o[5]=e("label",{class:"block text-sm font-medium text-game-text-secondary mb-2"}," Email ",-1)),u(e("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>t(s).email=l),type:"email",required:"",class:"w-full px-3 py-2 bg-game-light border border-white/20 rounded-lg text-white focus:outline-none focus:border-game-accent",placeholder:"Nhập email"},null,512),[[m,t(s).email]])])),t(a)?p("",!0):(i(),n("div",A,[o[6]||(o[6]=e("label",{class:"block text-sm font-medium text-game-text-secondary mb-2"}," Tên nhân vật ",-1)),u(e("input",{"onUpdate:modelValue":o[2]||(o[2]=l=>t(s).playerName=l),type:"text",required:"",class:"w-full px-3 py-2 bg-game-light border border-white/20 rounded-lg text-white focus:outline-none focus:border-game-accent",placeholder:"Nhập tên nhân vật"},null,512),[[m,t(s).playerName]])])),e("div",null,[o[7]||(o[7]=e("label",{class:"block text-sm font-medium text-game-text-secondary mb-2"}," Mật khẩu ",-1)),u(e("input",{"onUpdate:modelValue":o[3]||(o[3]=l=>t(s).password=l),type:"password",required:"",class:"w-full px-3 py-2 bg-game-light border border-white/20 rounded-lg text-white focus:outline-none focus:border-game-accent",placeholder:"Nhập mật khẩu"},null,512),[[m,t(s).password]])]),e("button",{type:"submit",disabled:t(g),class:"w-full game-button py-2 rounded-lg text-white font-semibold disabled:opacity-50"},d(t(g)?"Đang xử lý...":t(a)?"Đăng Nhập":"Đăng Ký"),9,B)],32),e("div",D,[e("button",{onClick:w,class:"text-game-accent hover:text-green-300 transition-colors"},d(t(a)?"Chưa có tài khoản? Đăng ký":"Đã có tài khoản? Đăng nhập"),1)]),t(b)?(i(),n("div",L,[e("p",T,d(t(b)),1)])):p("",!0)])]))}};export{P as _};
